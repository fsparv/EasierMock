apply plugin: 'java'
apply plugin: 'eclipse'

sourceCompatibility = 1.7
version = 1.0

repositories {
  mavenCentral()
}

dependencies {
    compile 'junit:junit-dep:4.10'
    compile 'org.easymock:easymock:3.1'
}

jar {
    from 'LICENSE.txt'
    rename '(LICENSE.txt)', 'META-INF/$1'
}

jar {
    manifest {
        attributes(
            'Implementation-Title': 'easier-test',
            'Implementation-Version': version,
            'Build-Timestamp': getTimestamp(),
            'Build-Jdk': getJdk(),
            'Build-Tool': GradleVersion.current()
        )
    }
}

def getTimestamp() {
    def dt = new java.util.Date()
    def df = new java.text.SimpleDateFormat('yyyy-MM-dd HH:mm:ss', Locale.ENGLISH)
    df.format(dt)
}

def getJdk() {
    "${System.getProperty('java.version')} (${System.getProperty('java.vm.vendor')} ${System.getProperty('java.vm.version')})"
}
